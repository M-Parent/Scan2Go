# s2g-express - Backend Docker Compose (Standalone)
# Run: docker-compose up -d

services:
  backend:
    build:
      context: .
      dockerfile: dockerfile
    container_name: s2g-backend-standalone
    restart: unless-stopped
    environment:
      SERVER_IP: ${SERVER_IP:-0.0.0.0}
      SERVER_PORT: ${SERVER_PORT:-6301}
      FRONTEND_URLS: ${FRONTEND_URLS:-http://localhost:3000,http://localhost:3005}
      DB_HOST: ${DB_HOST:-localhost}
      DB_PORT: ${DB_PORT:-5433}
      DB_NAME: ${DB_NAME:-scan2go}
      DB_USER: ${DB_USER:-scan2go}
      DB_PASSWORD: ${DB_PASSWORD:-Password123!}
    ports:
      - "${SERVER_PORT:-6301}:6301"
    volumes:
      - ./uploads:/app/uploads
      - ./logs:/app/logs
    healthcheck:
      test:
        [
          "CMD",
          "wget",
          "--no-verbose",
          "--tries=1",
          "--spider",
          "http://localhost:6301/api/projects",
        ]
      interval: 30s
      timeout: 10s
      start_period: 10s
      retries: 3
